package Main;
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        //Music.playBackground("src\\Main\\Music.wav", true);

       
System.out.println("\n\n\n");
        System.out.println("    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— ");
        System.out.println("    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—");
        System.out.println("    â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘");
        System.out.println("    â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘");
        System.out.println("    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•");
        System.out.println("    â•šâ•â•â•â•â•â• â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â• â•šâ•â•â•â•šâ•â•â•  â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â• ");
        System.out.println();
        System.out.println("    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ");
        System.out.println("    â–ˆâ–ˆ                                                                â–ˆâ–ˆ");
        System.out.println("    â–ˆâ–ˆ               A Terminal-Based Adventure Game                  â–ˆâ–ˆ");
        System.out.println("    â–ˆâ–ˆ                                                                â–ˆâ–ˆ");
        System.out.println("    â–ˆâ–ˆ                ğŸ”¥ FUSE â€¢ BATTLE â€¢ CONQUER ğŸ”¥                   â–ˆâ–ˆ");
        System.out.println("    â–ˆâ–ˆ                                                                â–ˆâ–ˆ");
        System.out.println("    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ");
        System.out.println("\n\n");

        System.out.print("Enter your champion name: ");
        String playerName = scanner.nextLine().trim();
        if (playerName.isEmpty()) {
            playerName = "Champion";
        }

        Player player = new Player(playerName);
        System.out.println("\nWelcome, " + playerName + "!");
        System.out.println("Preparing your journey...\n");
        System.out.println("[Press ENTER to continue]");
        scanner.nextLine();

        StoryManager storyManager = new StoryManager(player);
        // Intro
        storyManager.playIntroduction();

        // Beast Selection
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘      SELECT YOUR MECHA BEASTS          â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");

        System.out.println("\nProfessor Ai-P: Choose 3 Mecha Beasts to accompany you!");
        System.out.println("Choose wisely - different types have advantages and weaknesses.\n");


        MechaBeast[] availableBeasts = MechaBeastFactory.getAllStarterBeasts();

        // Selection Table
        System.out.println("â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”");
        System.out.println("â”‚ #  â”‚ Name        â”‚ Type     â”‚  HP  â”‚ Speed â”‚ Mana  â”‚");
        System.out.println("â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤");

        // Loop sa mga available beasts
        for (int i = 0; i < 8; i++) {
            MechaBeast beast = availableBeasts[i];
            System.out.printf("â”‚ %-2d â”‚ %-11s â”‚ %-8s â”‚ %-4d â”‚ %-5d â”‚ %-5d â”‚%n",
                    (i + 1),
                    beast.getName(),
                    beast.getType().getDisplayName(),
                    beast.getMaxHp(),
                    beast.getSpeed(),
                    beast.getMaxMana()
            );
        }

        System.out.println("â”‚ 9  â”‚ ???         â”‚ ???      â”‚ ???? â”‚ ???   â”‚ ???   â”‚");
        System.out.println("â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜");

        System.out.println("\nğŸ’¡ TIP: Balance your team with different types!");
        System.out.println("   High HP = Tank | High Speed = First Strike | High Mana = Powerful Skills");
        System.out.println("   âš ï¸ Option 9 is a hidden beast... try it if you dare!");

        // Select 3 Beasts
        boolean[] alreadyChosen = new boolean[9];
        int selection;
        for (selection = 1; selection <= 3; selection++) {
            System.out.println("\nâ•”â•â• SELECTION " + selection + "/3 â•â•â•—");
            int choice;

            while (true) {
                System.out.print("Choose Mecha Beast " + selection + " (1-9): ");
                try {
                    choice = scanner.nextInt();

                    scanner.nextLine();

                    if (choice < 1 || choice > 9) {
                        throw new IllegalArgumentException("Please enter a number between 1 and 9.");
                    }

                    if (alreadyChosen[choice - 1]) {
                        throw new IllegalStateException("That beast is already chosen. Pick another.");
                    }


                    alreadyChosen[choice - 1] = true;
                    break;

                } catch (IllegalArgumentException | IllegalStateException e) {
                    System.out.println(e.getMessage());
                } catch (Exception e) {
                    System.out.print("Invalid input. Please enter a number: ");
                    scanner.nextLine();
                }
            }

            MechaBeast selectedBeast = availableBeasts[choice - 1];

            if (choice == 9) {
                System.out.println("\nâš ï¸ SECRET UNLOCKED! âš ï¸");
                System.out.println("âœ“ Kingmantis (OVERPOWERED CHARACTER) added to your team!");
                System.out.println("  HP: " + selectedBeast.getMaxHp() +
                        " | Speed: " + selectedBeast.getSpeed() +
                        " | Mana: " + selectedBeast.getMaxMana());
                System.out.println("  This is a CHEAT beast with incredible stats!");
            } else {
                System.out.println("âœ“ " + selectedBeast.getName() + " (" +
                        selectedBeast.getType().getDisplayName() + ") added to your team!");
                System.out.println("  HP: " + selectedBeast.getMaxHp() +
                        " | Speed: " + selectedBeast.getSpeed() +
                        " | Mana: " + selectedBeast.getMaxMana());
            }

            //Adding beast to player team
            player.addMechaBeast(selectedBeast.copy());
        }

        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘         YOUR TEAM IS READY!            â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");

        System.out.println("\nYour team:");

        MechaBeast[] playerBeasts = player.getMechaBeasts();
        for (int i = 0; i < player.getBeastCount(); i++) {
            MechaBeast beast = playerBeasts[i];
            System.out.printf("%d. %s (%s)%n", (i + 1), beast.getName(),
                    beast.getType().getDisplayName());
        }

        System.out.println("\nProfessor Ai-P: Excellent choices! Now let's begin the test!");
        System.out.println("\n[Press ENTER to continue]");
        scanner.nextLine();


        // Stage 1: Alpha Village
        storyManager.playStage1AlphaVillage();

        // Stage 2: Beta City
        storyManager.playStage2BetaCity();

        // Stage 3: The Collapse
        storyManager.playStage3Collapse();

        // Game Complete
        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘          FINAL STATISTICS              â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");


        System.out.println("\nChampion: " + player.getName());
        System.out.println("\nYour Final Team:");

        // display final team
        for (int i = 0; i < player.getBeastCount(); i++) {
            MechaBeast beast = playerBeasts[i];
            String status;
            if (beast.isAlive()) {
                status = "âœ“ ALIVE";
            } else {
                status = "âœ— FAINTED";
            }

            System.out.printf("%d. %-15s (%s) - %s%n",
                    (i + 1),
                    beast.getName(),
                    beast.getType().getDisplayName(),
                    status
            );
        }

        System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘    Stages Completed: 3/3               â•‘");
        System.out.println("â•‘    Rank: LEGENDARY CHAMPION            â•‘");
        System.out.println("â•‘    Status: GAME SAVED                  â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");

        System.out.println("\nThank you for testing DigiWorld!");
        System.out.println("Your feedback will help shape the future of gaming!");


    }

}
